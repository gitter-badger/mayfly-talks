buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.2'
    }
}

import org.asciidoctor.gradle.AsciidoctorTask

subprojects {
    repositories.jcenter()
    apply plugin: "org.asciidoctor.gradle.asciidoctor"
    asciidoctorj {
        version = '1.5.2'
    }

    ext.backendPath = "${rootDir}/.backends/reveal.js"

    task presentation(type: AsciidoctorTask) {
        classpath = project.configurations.asciidoctor
        sourceDir = file('src/docs/asciidoc')
        sources {
            include 'presentation.adoc'
        }
        resources {
            from("${backendPath}/resources") {
                include '**/*'
            }
            from("${sourceDir}/../resources") {
                include '**/*'
            }
        }
        backends = ['html5']
        requires = ['slim', 'tilt', 'thread_safe']
        logDocuments = true
        options = [
                template_engine: 'slim',
                template_dirs  : ["${backendPath}/templates"]
        ]
    }
}
